
#!/bin/bash
# change_theme.sh
# Usage: ./change_theme.sh <image_filename>

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <path_to_image>"
    exit 1
fi

WALL_DIR="$HOME/Pictures/Wallpaper"
IMAGE="$1"
IMAGEFULL="$WALL_DIR/$IMAGE"
TEMP_IMAGE="$HOME/tmp/pywal_temp_image.png"

pkill -9 spotify
pkill -f mpvpaper || true

wal -i "$IMAGEFULL" -n -s -t -e
matugen image "$IMAGEFULL"

swww img "$IMAGEFULL" --transition-type fade --transition-duration 1

pywal-spicetify SharkBlue

pkill -f swaync || true
swaync & disown

sleep 0.5

hyprctl dispatch togglespecialworkspace magic

rm -f "$TEMP_IMAGE"

notify-send "âœ… Theme Applied" "Wallpaper, colors, and Spotify magic pad ready!"
